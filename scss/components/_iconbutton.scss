// ========================================
// ZenKit - Icon Button Component
// ========================================

@use '../abstracts/variables' as *;

// ----------------------------------------
// Icon Button Base
// ----------------------------------------
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  padding: 0;
  font-size: 1.25rem;
  color: var(--text);
  background-color: transparent;
  border: none;
  border-radius: $border-radius;
  cursor: pointer;
  transition: all $transition-fast $transition-timing;
  -webkit-tap-highlight-color: transparent;

  &:hover {
    background-color: var(--gray-100);
  }

  &:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--primary-200);
  }

  &:active {
    transform: scale(0.95);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  svg {
    width: 1em;
    height: 1em;
  }
}

// ----------------------------------------
// Icon Button Sizes
// ----------------------------------------
.icon-btn-xs {
  width: 1.5rem;
  height: 1.5rem;
  font-size: 0.75rem;
}

.icon-btn-sm {
  width: 2rem;
  height: 2rem;
  font-size: 1rem;
}

.icon-btn-md {
  width: 2.5rem;
  height: 2.5rem;
  font-size: 1.25rem;
}

.icon-btn-lg {
  width: 3rem;
  height: 3rem;
  font-size: 1.5rem;
}

.icon-btn-xl {
  width: 3.5rem;
  height: 3.5rem;
  font-size: 1.75rem;
}

// ----------------------------------------
// Icon Button Variants
// ----------------------------------------

// Filled
.icon-btn-filled {
  background-color: var(--gray-100);

  &:hover {
    background-color: var(--gray-200);
  }
}

// Outlined
.icon-btn-outlined {
  border: 1px solid var(--border);

  &:hover {
    background-color: var(--gray-50);
    border-color: var(--gray-400);
  }
}

// Ghost (no background until hover)
.icon-btn-ghost {
  background-color: transparent;

  &:hover {
    background-color: var(--gray-100);
  }
}

// Light
.icon-btn-light {
  background-color: var(--gray-50);

  &:hover {
    background-color: var(--gray-100);
  }
}

// ----------------------------------------
// Icon Button Colors
// ----------------------------------------
.icon-btn-primary {
  color: var(--primary);

  &:hover {
    background-color: var(--primary-50);
  }

  &.icon-btn-filled {
    background-color: var(--primary);
    color: var(--white);

    &:hover {
      background-color: var(--primary-600);
    }
  }

  &.icon-btn-outlined {
    border-color: var(--primary);

    &:hover {
      background-color: var(--primary-50);
    }
  }
}

.icon-btn-secondary {
  color: var(--gray-600);

  &:hover {
    background-color: var(--gray-100);
  }

  &.icon-btn-filled {
    background-color: var(--gray-600);
    color: var(--white);

    &:hover {
      background-color: var(--gray-700);
    }
  }
}

.icon-btn-success {
  color: var(--success);

  &:hover {
    background-color: var(--success-50);
  }

  &.icon-btn-filled {
    background-color: var(--success);
    color: var(--white);

    &:hover {
      background-color: var(--success-600);
    }
  }
}

.icon-btn-danger {
  color: var(--danger);

  &:hover {
    background-color: var(--danger-50);
  }

  &.icon-btn-filled {
    background-color: var(--danger);
    color: var(--white);

    &:hover {
      background-color: var(--danger-600);
    }
  }
}

.icon-btn-warning {
  color: var(--warning);

  &:hover {
    background-color: var(--warning-50);
  }

  &.icon-btn-filled {
    background-color: var(--warning);
    color: var(--gray-900);

    &:hover {
      background-color: var(--warning-600);
    }
  }
}

.icon-btn-info {
  color: var(--info);

  &:hover {
    background-color: var(--info-50);
  }

  &.icon-btn-filled {
    background-color: var(--info);
    color: var(--white);

    &:hover {
      background-color: var(--info-600);
    }
  }
}

// ----------------------------------------
// Icon Button Shapes
// ----------------------------------------
.icon-btn-rounded {
  border-radius: $border-radius-full;
}

.icon-btn-square {
  border-radius: 0;
}

// ----------------------------------------
// Icon Button Loading
// ----------------------------------------
.icon-btn-loading {
  position: relative;
  pointer-events: none;

  svg {
    opacity: 0;
  }

  &::after {
    content: "";
    position: absolute;
    width: 1em;
    height: 1em;
    border: 2px solid currentColor;
    border-top-color: transparent;
    border-radius: 50%;
    animation: icon-btn-spin 0.6s linear infinite;
  }
}

@keyframes icon-btn-spin {
  to {
    transform: rotate(360deg);
  }
}

// ----------------------------------------
// Icon Button with Tooltip
// ----------------------------------------
.icon-btn-tooltip {
  position: relative;

  &::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    padding: 0.375rem 0.625rem;
    font-size: var(--text-xs);
    font-weight: $font-weight-medium;
    color: var(--white);
    background-color: var(--gray-900);
    border-radius: $border-radius;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity $transition-fast $transition-timing;
    pointer-events: none;
    z-index: 100;
  }

  &::after {
    content: "";
    position: absolute;
    bottom: calc(100% + 4px);
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: var(--gray-900);
    opacity: 0;
    visibility: hidden;
    transition: opacity $transition-fast $transition-timing;
  }

  &:hover::before,
  &:hover::after {
    opacity: 1;
    visibility: visible;
  }
}

// ----------------------------------------
// Icon Button Group
// ----------------------------------------
.icon-btn-group {
  display: inline-flex;

  .icon-btn {
    border-radius: 0;

    &:first-child {
      border-radius: $border-radius 0 0 $border-radius;
    }

    &:last-child {
      border-radius: 0 $border-radius $border-radius 0;
    }

    &:not(:last-child) {
      border-right: 1px solid var(--border);
    }
  }

  &.icon-btn-group-rounded .icon-btn {
    &:first-child {
      border-radius: $border-radius-full 0 0 $border-radius-full;
    }

    &:last-child {
      border-radius: 0 $border-radius-full $border-radius-full 0;
    }
  }
}

// Vertical group
.icon-btn-group-vertical {
  flex-direction: column;

  .icon-btn {
    border-radius: 0;

    &:first-child {
      border-radius: $border-radius $border-radius 0 0;
    }

    &:last-child {
      border-radius: 0 0 $border-radius $border-radius;
    }

    &:not(:last-child) {
      border-right: none;
      border-bottom: 1px solid var(--border);
    }
  }
}

// ----------------------------------------
// Dark Mode
// ----------------------------------------
[data-theme="dark"] {
  .icon-btn {
    color: var(--gray-300);

    &:hover {
      background-color: var(--gray-800);
    }
  }

  .icon-btn-filled {
    background-color: var(--gray-800);

    &:hover {
      background-color: var(--gray-700);
    }
  }

  .icon-btn-outlined {
    border-color: var(--gray-600);

    &:hover {
      background-color: var(--gray-800);
    }
  }

  .icon-btn-light {
    background-color: var(--gray-800);

    &:hover {
      background-color: var(--gray-700);
    }
  }

  .icon-btn-primary:hover {
    background-color: rgba($primary, 0.2);
  }

  .icon-btn-success:hover {
    background-color: rgba($success, 0.2);
  }

  .icon-btn-danger:hover {
    background-color: rgba($danger, 0.2);
  }

  .icon-btn-warning:hover {
    background-color: rgba($warning, 0.2);
  }

  .icon-btn-info:hover {
    background-color: rgba($info, 0.2);
  }

  .icon-btn-tooltip::before {
    background-color: var(--gray-700);
  }

  .icon-btn-tooltip::after {
    border-top-color: var(--gray-700);
  }

  .icon-btn-group .icon-btn:not(:last-child) {
    border-color: var(--gray-700);
  }
}
