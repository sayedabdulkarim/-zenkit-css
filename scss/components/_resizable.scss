// ========================================
// ZenKit - Resizable Component
// ========================================

@use '../abstracts/variables' as *;

// ----------------------------------------
// Resizable Container
// ----------------------------------------
.resizable {
  position: relative;
  display: flex;
}

.resizable-vertical {
  flex-direction: column;
}

.resizable-horizontal {
  flex-direction: row;
}

// ----------------------------------------
// Resizable Panel
// ----------------------------------------
.resizable-panel {
  position: relative;
  overflow: auto;
}

.resizable-panel-content {
  height: 100%;
  width: 100%;
  overflow: auto;
}

// ----------------------------------------
// Resizable Handle
// ----------------------------------------
.resizable-handle {
  position: relative;
  flex-shrink: 0;
  background-color: var(--border);
  transition: background-color $transition-fast $transition-timing;
  z-index: 10;

  &:hover {
    background-color: var(--primary);
  }

  &:active {
    background-color: var(--primary-600);
  }
}

// Horizontal handle (for vertical split)
.resizable-handle-horizontal {
  width: 100%;
  height: 4px;
  cursor: row-resize;

  &::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 32px;
    height: 4px;
    background-color: var(--gray-400);
    border-radius: 2px;
  }
}

// Vertical handle (for horizontal split)
.resizable-handle-vertical {
  width: 4px;
  height: 100%;
  cursor: col-resize;

  &::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 4px;
    height: 32px;
    background-color: var(--gray-400);
    border-radius: 2px;
  }
}

// ----------------------------------------
// Handle Variants
// ----------------------------------------

// Minimal handle
.resizable-handle-minimal {
  background-color: transparent;

  &::before {
    display: none;
  }

  &:hover {
    background-color: var(--primary-100);
  }
}

// Bordered handle
.resizable-handle-bordered {
  background-color: var(--bg);
  border: 1px solid var(--border);

  &.resizable-handle-horizontal {
    height: 8px;
    border-left: none;
    border-right: none;
  }

  &.resizable-handle-vertical {
    width: 8px;
    border-top: none;
    border-bottom: none;
  }
}

// Dots handle
.resizable-handle-dots {
  &::before {
    background: transparent;
  }

  &::after {
    content: "···";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--gray-400);
    font-size: 0.875rem;
    letter-spacing: 2px;
  }

  &.resizable-handle-vertical::after {
    content: "⋮";
    writing-mode: vertical-rl;
    letter-spacing: 0;
  }
}

// ----------------------------------------
// Handle Sizes
// ----------------------------------------
.resizable-handle-sm {
  &.resizable-handle-horizontal {
    height: 2px;

    &::before {
      width: 24px;
      height: 2px;
    }
  }

  &.resizable-handle-vertical {
    width: 2px;

    &::before {
      width: 2px;
      height: 24px;
    }
  }
}

.resizable-handle-lg {
  &.resizable-handle-horizontal {
    height: 8px;

    &::before {
      width: 48px;
      height: 6px;
    }
  }

  &.resizable-handle-vertical {
    width: 8px;

    &::before {
      width: 6px;
      height: 48px;
    }
  }
}

// ----------------------------------------
// Resizing State
// ----------------------------------------
.resizable-resizing {
  user-select: none;
  cursor: col-resize;

  &.resizable-vertical {
    cursor: row-resize;
  }
}

.resizable-resizing .resizable-handle {
  background-color: var(--primary);
}

// ----------------------------------------
// Collapsed Panel
// ----------------------------------------
.resizable-panel-collapsed {
  flex: 0 0 0 !important;
  min-width: 0 !important;
  min-height: 0 !important;
  overflow: hidden;
}

.resizable-collapse-btn {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  background-color: var(--bg);
  border: 1px solid var(--border);
  border-radius: 50%;
  cursor: pointer;
  z-index: 20;
  transition: all $transition-fast $transition-timing;

  &:hover {
    background-color: var(--gray-100);
    border-color: var(--primary);
  }

  svg {
    width: 0.75rem;
    height: 0.75rem;
    transition: transform $transition-fast $transition-timing;
  }
}

.resizable-handle-vertical .resizable-collapse-btn {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.resizable-handle-horizontal .resizable-collapse-btn {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// ----------------------------------------
// Constraints Indicator
// ----------------------------------------
.resizable-handle.at-min,
.resizable-handle.at-max {
  background-color: var(--warning);
  cursor: not-allowed;
}

// ----------------------------------------
// Split Layout Presets
// ----------------------------------------
.resizable-split-50-50 {
  .resizable-panel {
    flex: 1 1 50%;
  }
}

.resizable-split-30-70 {
  .resizable-panel:first-child {
    flex: 0 0 30%;
  }

  .resizable-panel:last-child {
    flex: 1 1 70%;
  }
}

.resizable-split-70-30 {
  .resizable-panel:first-child {
    flex: 1 1 70%;
  }

  .resizable-panel:last-child {
    flex: 0 0 30%;
  }
}

.resizable-split-25-75 {
  .resizable-panel:first-child {
    flex: 0 0 25%;
  }

  .resizable-panel:last-child {
    flex: 1 1 75%;
  }
}

// ----------------------------------------
// Nested Resizable
// ----------------------------------------
.resizable-nested {
  height: 100%;
  width: 100%;
}

// ----------------------------------------
// Resizable Box (Single Element)
// ----------------------------------------
.resizable-box {
  position: relative;
  display: inline-block;
}

.resizable-box-handle {
  position: absolute;
  background-color: transparent;

  &:hover {
    background-color: var(--primary-100);
  }
}

.resizable-box-handle-e {
  right: 0;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: e-resize;
}

.resizable-box-handle-s {
  bottom: 0;
  left: 0;
  right: 0;
  height: 8px;
  cursor: s-resize;
}

.resizable-box-handle-se {
  right: 0;
  bottom: 0;
  width: 16px;
  height: 16px;
  cursor: se-resize;

  &::after {
    content: "";
    position: absolute;
    right: 3px;
    bottom: 3px;
    width: 8px;
    height: 8px;
    border-right: 2px solid var(--gray-400);
    border-bottom: 2px solid var(--gray-400);
  }
}

.resizable-box-handle-w {
  left: 0;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: w-resize;
}

.resizable-box-handle-n {
  top: 0;
  left: 0;
  right: 0;
  height: 8px;
  cursor: n-resize;
}

.resizable-box-handle-nw {
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  cursor: nw-resize;
}

.resizable-box-handle-ne {
  right: 0;
  top: 0;
  width: 16px;
  height: 16px;
  cursor: ne-resize;
}

.resizable-box-handle-sw {
  left: 0;
  bottom: 0;
  width: 16px;
  height: 16px;
  cursor: sw-resize;
}

// ----------------------------------------
// Dark Mode
// ----------------------------------------
[data-theme="dark"] {
  .resizable-handle {
    background-color: var(--gray-700);

    &:hover {
      background-color: var(--primary);
    }
  }

  .resizable-handle::before {
    background-color: var(--gray-500);
  }

  .resizable-handle-bordered {
    background-color: var(--gray-800);
    border-color: var(--gray-700);
  }

  .resizable-handle-minimal:hover {
    background-color: rgba($primary, 0.2);
  }

  .resizable-collapse-btn {
    background-color: var(--gray-800);
    border-color: var(--gray-600);

    &:hover {
      background-color: var(--gray-700);
    }
  }

  .resizable-box-handle-se::after {
    border-color: var(--gray-500);
  }
}
